<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>清涧</title>
  
  <subtitle>让事情是它本来该有的样子</subtitle>
  <link href="https://esyruok.github.io/atom.xml" rel="self"/>
  
  <link href="https://esyruok.github.io/"/>
  <updated>2024-07-21T13:30:38.023Z</updated>
  <id>https://esyruok.github.io/</id>
  
  <author>
    <name>EsYruok</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Neovim环境配置</title>
    <link href="https://esyruok.github.io/posts/4081ca65/"/>
    <id>https://esyruok.github.io/posts/4081ca65/</id>
    <published>2024-02-07T15:06:21.000Z</published>
    <updated>2024-07-21T13:30:38.023Z</updated>
    
    <content type="html"><![CDATA[<p>记录一下配置Neovim环境的过程. <span id="more"></span></p><h2 id="neovim">Neovim</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S neovim</span><br><span class="line"><span class="built_in">cd</span> <span class="comment"># home</span></span><br><span class="line"><span class="built_in">mkdir</span> .config/nvim &amp;&amp; <span class="built_in">cd</span> .config/nvim</span><br><span class="line"><span class="built_in">touch</span> init.lua</span><br><span class="line"><span class="built_in">mkdir</span> lua</span><br><span class="line"><span class="built_in">mkdir</span> lua/config</span><br><span class="line"><span class="built_in">touch</span> lua/config/keymaps.lua</span><br><span class="line"><span class="built_in">touch</span> lua/config/options.lua</span><br><span class="line">nvim init.lua </span><br><span class="line"><span class="comment"># require(&quot;config.options&quot;)</span></span><br><span class="line"><span class="comment"># require(&quot;config.keymaps&quot;)</span></span><br><span class="line">nvim lua/config/keymaps.lua</span><br><span class="line"><span class="comment"># local opts = &#123;</span></span><br><span class="line">    <span class="comment"># noremap = true,</span></span><br><span class="line">    <span class="comment"># silent = true,</span></span><br><span class="line"><span class="comment"># &#125;</span></span><br></pre></td></tr></table></figure><h2 id="vim-options">Vim options</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">nvim lua/config/options.lua</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">vim.g.mapleader = <span class="string">&quot; &quot;</span></span><br><span class="line">vim.g.maplocalleader = <span class="string">&quot; &quot;</span></span><br><span class="line"></span><br><span class="line">vim.opt.clipboard = <span class="string">&quot;unnamedplus&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--tab</span></span><br><span class="line">vim.opt.tabstop = <span class="number">4</span></span><br><span class="line">vim.opt.shiftwidth = <span class="number">4</span></span><br><span class="line">vim.opt.expandtab = <span class="literal">true</span></span><br><span class="line">vim.opt.softtabstop = <span class="number">4</span></span><br><span class="line">vim.opt.shiftround = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--ui</span></span><br><span class="line">vim.opt.number = <span class="literal">true</span></span><br><span class="line">vim.opt.relativenumber = <span class="literal">true</span></span><br><span class="line">vim.opt.cursorline = <span class="literal">true</span></span><br><span class="line">vim.opt.colorcolumn = <span class="string">&quot;160&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--search</span></span><br><span class="line">vim.opt.incsearch = <span class="literal">true</span></span><br><span class="line">vim.opt.hlsearch = <span class="literal">false</span></span><br><span class="line">vim.opt.ignorecase = <span class="literal">true</span></span><br><span class="line">vim.opt.smartcase = <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="lazy.nvim">Lazy.nvim</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S luarocks ttf-jetbrains-mono-nerd</span><br><span class="line">nvim lua/config/lazy.lua <span class="comment"># https://lazy.folke.io/installation</span></span><br><span class="line">nvim init.lua <span class="comment"># require(&quot;config.lazy&quot;)</span></span><br><span class="line"><span class="built_in">mkdir</span> lua/plugins</span><br><span class="line">nvim <span class="comment"># :checkhealth lazy</span></span><br></pre></td></tr></table></figure><h2 id="nvim-tree.lua">Nvim-tree.lua</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">nvim lua/plugin/plugin-nvim-tree.lua</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="string">&#x27;nvim-tree/nvim-tree.lua&#x27;</span>,</span><br><span class="line">    version = <span class="string">&quot;*&quot;</span>,</span><br><span class="line">    lazy = <span class="literal">false</span>,</span><br><span class="line">    dependencies = &#123;</span><br><span class="line">        <span class="string">&#x27;nvim-tree/nvim-web-devicons&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    opts = &#123;</span><br><span class="line">        actions = &#123;</span><br><span class="line">            open_file = &#123;</span><br><span class="line">                quit_on_open = <span class="literal">true</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--keymaps</span></span><br><span class="line">vim.api.nvim_set_keymap(<span class="string">&quot;n&quot;</span>,<span class="string">&quot;T&quot;</span>,<span class="string">&quot;&lt;cmd&gt;NvimTreeToggle&lt;cr&gt;&quot;</span>,opt)</span><br></pre></td></tr></table></figure><h2 id="bufferline.nvim">Bufferline.nvim</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">nvim lua/config/options.lua <span class="comment"># vim.opt.termguicolors = true</span></span><br><span class="line">nvim lua/plugins/plugin-bufferline.lua</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="string">&#x27;akinsho/bufferline.nvim&#x27;</span>,</span><br><span class="line">    version = <span class="string">&quot;*&quot;</span>,</span><br><span class="line">    dependencoes = &#123; <span class="string">&#x27;nvim-tree/nvim-web-devicons&#x27;</span> &#125;,</span><br><span class="line">    opts = &#123;</span><br><span class="line">        options = &#123;</span><br><span class="line">            offsets = &#123;</span><br><span class="line">                &#123;</span><br><span class="line">                    filetype = <span class="string">&#x27;NvimTree&#x27;</span>,</span><br><span class="line">                    text = <span class="string">&#x27;File Explorer&#x27;</span>,</span><br><span class="line">                    highlight = <span class="string">&#x27;Directory&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>:h bufferline.nvim</p></blockquote><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--keymaps</span></span><br><span class="line">vim.api.nvim_set_keymap(<span class="string">&quot;n&quot;</span>,<span class="string">&quot;&lt;C-h&gt;&quot;</span>,<span class="string">&quot;&lt;cmd&gt;BufferLineCyclePrev&lt;cr&gt;&quot;</span>,opt)</span><br><span class="line">vim.api.nvim_set_keymap(<span class="string">&quot;n&quot;</span>,<span class="string">&quot;&lt;C-l&gt;&quot;</span>,<span class="string">&quot;&lt;cmd&gt;BufferLineCycleNext&lt;cr&gt;&quot;</span>,opt)</span><br><span class="line">vim.api.nvim_set_keymap(<span class="string">&quot;n&quot;</span>,<span class="string">&quot;&lt;leader&gt;bc&quot;</span>,<span class="string">&quot;&lt;cmd&gt;bdelete %&lt;cr&gt;&quot;</span>,opt)</span><br></pre></td></tr></table></figure><h2 id="lualine.nvim">Lualine.nvim</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">nvim lua/plugins/plugin-lualine.lua</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="string">&#x27;nvim-lualine/lualine.nvim&#x27;</span>,</span><br><span class="line">    dependencies = &#123; <span class="string">&#x27;nvim-tree/nvim-web-devicons&#x27;</span> &#125;,</span><br><span class="line">    opts = &#123;</span><br><span class="line">        options = &#123;</span><br><span class="line">            theme = <span class="string">&#x27;jellybeans&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="telescope.nvim">Telescope.nvim</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S ripgrep fd</span><br><span class="line">nvim lua/plugins/plugin-telescope.lua</span><br><span class="line">nvim <span class="comment"># :checkhealty telescope</span></span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="string">&#x27;nvim-telescope/telescope.nvim&#x27;</span>,</span><br><span class="line">    branch = <span class="string">&#x27;0.1.x&#x27;</span>,</span><br><span class="line">    dependencies = &#123; <span class="string">&#x27;nvim-lua/plenary.nvim&#x27;</span> &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--keymaps</span></span><br><span class="line">vim.api.nvim_set_keymap(<span class="string">&quot;n&quot;</span>,<span class="string">&quot;&lt;leader&gt;ff&quot;</span>,<span class="string">&quot;&lt;cmd&gt;Telescope find_files&lt;cr&gt;&quot;</span>,opt)</span><br><span class="line">vim.api.nvim_set_keymap(<span class="string">&quot;n&quot;</span>,<span class="string">&quot;&lt;leader&gt;fg&quot;</span>,<span class="string">&quot;&lt;cmd&gt;Telescope live_grep&lt;cr&gt;&quot;</span>,opt)</span><br><span class="line">vim.api.nvim_set_keymap(<span class="string">&quot;n&quot;</span>,<span class="string">&quot;&lt;leader&gt;fh&quot;</span>,<span class="string">&quot;&lt;cmd&gt;Telescope help_tags&lt;cr&gt;&quot;</span>,opt)</span><br><span class="line">vim.api.nvim_set_keymap(<span class="string">&quot;n&quot;</span>,<span class="string">&quot;&lt;leader&gt;fk&quot;</span>,<span class="string">&quot;&lt;cmd&gt;Telescope keymaps&lt;cr&gt;&quot;</span>,opt)</span><br></pre></td></tr></table></figure><h2 id="toggleterm.nvim">Toggleterm.nvim</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">nvim lua/plugins/plugin-toggleterm.lua</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="string">&#x27;akinsho/toggleterm.nvim&#x27;</span>,</span><br><span class="line">    version = <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">    opts = &#123;</span><br><span class="line">        open_mapping = <span class="string">[[&lt;C-r&gt;]]</span>,</span><br><span class="line">        direction = <span class="string">&quot;float&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--keymaps</span></span><br><span class="line">vim.api.nvim_set_keymap(<span class="string">&quot;t&quot;</span>,<span class="string">&quot;&lt;Esc&gt;&quot;</span>,<span class="string">&quot;&lt;C-\\&gt;&lt;C-n&gt;&quot;</span>,opt)</span><br><span class="line">vim.api.nvim_set_keymap(<span class="string">&quot;n&quot;</span>,<span class="string">&quot;&lt;leader&gt;tf&quot;</span>,<span class="string">&quot;&lt;cmd&gt;ToggleTerm direction=float&lt;cr&gt;&quot;</span>,opt)</span><br><span class="line">vim.api.nvim_set_keymap(<span class="string">&quot;n&quot;</span>,<span class="string">&quot;&lt;leader&gt;th&quot;</span>,<span class="string">&quot;&lt;cmd&gt;ToggleTerm direction=horizontal&lt;cr&gt;&quot;</span>,opt)</span><br></pre></td></tr></table></figure><h2 id="lsp">LSP</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">nvim lua/plugins/plugin-lsp.lua</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">--mason</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&#x27;williamboman/mason.nvim&#x27;</span>,</span><br><span class="line">        opts = &#123;</span><br><span class="line">            ui = &#123;</span><br><span class="line">                icons = &#123;</span><br><span class="line">                    package_installed = <span class="string">&quot;✓&quot;</span>,</span><br><span class="line">                    package_pending = <span class="string">&quot;➜&quot;</span>,</span><br><span class="line">                    package_uninstalled = <span class="string">&quot;✗&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">--mason-lspconfig</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&#x27;williamboman/mason-lspconfig.nvim&#x27;</span>,</span><br><span class="line">        opts = &#123;</span><br><span class="line">            ensure_installed = &#123; <span class="string">&quot;lua_ls&quot;</span>, <span class="string">&quot;rust_analyzer&quot;</span> &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">--lspconfig</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&#x27;neovim/nvim-lspconfig&#x27;</span>,</span><br><span class="line">        <span class="built_in">config</span> = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="keyword">local</span> lspconfig = <span class="built_in">require</span>(<span class="string">&#x27;lspconfig&#x27;</span>)</span><br><span class="line">            lspconfig[<span class="string">&#x27;lua_ls&#x27;</span>].setup(&#123;&#125;)</span><br><span class="line">            lspconfig[<span class="string">&#x27;rust_analyzer&#x27;</span>].setup(&#123;&#125;)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">--lspsaga</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&#x27;nvimdev/lspsaga.nvim&#x27;</span>,</span><br><span class="line">        <span class="built_in">config</span> = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">require</span>(<span class="string">&#x27;lspsaga&#x27;</span>).setup(&#123;&#125;)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">        dependencies = &#123;</span><br><span class="line">            <span class="string">&#x27;nvim-treesitter/nvim-treesitter&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;nvim-tree/nvim-web-devicons&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--keymap</span></span><br></pre></td></tr></table></figure><h2 id="nvim-cmp">Nvim-cmp</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">nvim lua/plugins/plugin-cmp.lua</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&#x27;L3MON4D3/LuaSnip&#x27;</span>,</span><br><span class="line">        version = <span class="string">&#x27;v2.*&#x27;</span>,</span><br><span class="line">        build = <span class="string">&#x27;make install_jsregexp&#x27;</span>,</span><br><span class="line">        dependencies = &#123;</span><br><span class="line">            <span class="string">&#x27;saadparwaiz1/cmp_luasnip&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&#x27;hrsh7th/nvim-cmp&#x27;</span>,</span><br><span class="line">        dependencies = &#123;</span><br><span class="line">            <span class="comment">--&#x27;onsails/lspkind.nvim&#x27;,</span></span><br><span class="line">            <span class="string">&#x27;hrsh7th/cmp-nvim-lsp&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;hrsh7th/cmp-buffer&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;hrsh7th/cmp-path&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;hrsh7th/cmp-cmdline&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;neovim/nvim-lspconfig&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="built_in">config</span> = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="keyword">local</span> cmp = <span class="built_in">require</span>(<span class="string">&#x27;cmp&#x27;</span>)</span><br><span class="line">            <span class="comment">--local lspkind = require(&#x27;lspkind&#x27;)</span></span><br><span class="line">            cmp.setup(&#123;</span><br><span class="line">                snippet = &#123;</span><br><span class="line">                    expand = <span class="function"><span class="keyword">function</span><span class="params">(args)</span></span></span><br><span class="line">                        <span class="built_in">require</span>(<span class="string">&#x27;luasnip&#x27;</span>).lsp_expand(args.body)</span><br><span class="line">                    <span class="keyword">end</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                mapping = cmp.mapping.preset.<span class="built_in">insert</span>(&#123;</span><br><span class="line">                    [<span class="string">&#x27;&lt;C-b&gt;&#x27;</span>] = cmp.mapping.scroll_docs(<span class="number">-4</span>),</span><br><span class="line">                    [<span class="string">&#x27;&lt;C-f&gt;&#x27;</span>] = cmp.mapping.scroll_docs(<span class="number">4</span>),</span><br><span class="line">                    [<span class="string">&#x27;&lt;C-k&gt;&#x27;</span>] = cmp.mapping.select_prev_item(),</span><br><span class="line">                    [<span class="string">&#x27;&lt;C-j&gt;&#x27;</span>] = cmp.mapping.select_next_item(),</span><br><span class="line">                    [<span class="string">&#x27;&lt;C-Space&gt;&#x27;</span>] = cmp.mapping.complete(),</span><br><span class="line">                    [<span class="string">&#x27;&lt;C-e&gt;&#x27;</span>] = cmp.mapping.abort(),</span><br><span class="line">                    [<span class="string">&#x27;&lt;CR&gt;&#x27;</span>] = cmp.mapping.confirm(&#123; <span class="built_in">select</span> = <span class="literal">true</span> &#125;),</span><br><span class="line">                &#125;),</span><br><span class="line">                sources = cmp.<span class="built_in">config</span>.sources(&#123;</span><br><span class="line">                    &#123; name = <span class="string">&#x27;nvim_lsp&#x27;</span> &#125;,</span><br><span class="line">                    &#123; name = <span class="string">&#x27;luasnip&#x27;</span> &#125;,</span><br><span class="line">                &#125;,&#123;</span><br><span class="line">                    &#123; name = <span class="string">&#x27;buffer&#x27;</span> &#125;,</span><br><span class="line">                &#125;),</span><br><span class="line">                <span class="comment">--lspkind</span></span><br><span class="line">                <span class="comment">--[[</span></span><br><span class="line"><span class="comment">                formatting = &#123;</span></span><br><span class="line"><span class="comment">                    format = lspkind.cmp_format(&#123;</span></span><br><span class="line"><span class="comment">                        mode = &#x27;symbol&#x27;,</span></span><br><span class="line"><span class="comment">                        maxwidth = 50,</span></span><br><span class="line"><span class="comment">                        ellipsis_char = &#x27;...&#x27;,</span></span><br><span class="line"><span class="comment">                        show_labeDetails = true,</span></span><br><span class="line"><span class="comment">                    &#125;),</span></span><br><span class="line"><span class="comment">                &#125;,</span></span><br><span class="line"><span class="comment">                --]]</span></span><br><span class="line">            &#125;)</span><br><span class="line">            cmp.setup.cmdline(&#123;<span class="string">&#x27;/&#x27;</span>, <span class="string">&#x27;?&#x27;</span>&#125;,&#123;</span><br><span class="line">                mapping = cmp.mapping.preset.cmdline(),</span><br><span class="line">                sources = &#123;</span><br><span class="line">                    &#123; name = <span class="string">&#x27;buffer&#x27;</span> &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;)</span><br><span class="line">            cmp.setup.cmdline(<span class="string">&#x27;:&#x27;</span>,&#123;</span><br><span class="line">                mapping = cmp.mapping.preset.cmdline(),</span><br><span class="line">                sources = cmp.<span class="built_in">config</span>.sources(&#123;</span><br><span class="line">                    &#123; name = <span class="string">&#x27;path&#x27;</span> &#125;,</span><br><span class="line">                &#125;,&#123;</span><br><span class="line">                    &#123; name = <span class="string">&#x27;cmdline&#x27;</span> &#125;,</span><br><span class="line">                &#125;),</span><br><span class="line">                mathcing = &#123; disallow_symbol_nonprefix_matching = <span class="literal">false</span> &#125;,</span><br><span class="line">            &#125;)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;记录一下配置Neovim环境的过程.</summary>
    
    
    
    <category term="vim" scheme="https://esyruok.github.io/categories/vim/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux系统中修改键盘映射</title>
    <link href="https://esyruok.github.io/posts/9f7c0abf/"/>
    <id>https://esyruok.github.io/posts/9f7c0abf/</id>
    <published>2024-01-30T08:16:27.000Z</published>
    <updated>2024-06-10T03:13:13.320Z</updated>
    
    <content type="html"><![CDATA[<p>笔记本键盘的键位一般都是通用键位,一些习惯特殊配列或特殊键位的同学在使用笔记本键盘时都会很苦恼,通常会需要修改键位. 如果笔记本驱动能够使用最好, 可是支持 Linux下可用的驱动程序很少, 我们还可以通过修改系统对键盘的映射来调整键位.<span id="more"></span></p><hr /><ol type="1"><li>找到内置键盘的厂商，型号，版本标识 使用<code>ls /proc/bus/input/devices</code>, 通过Name找到自己的键盘设备信息，比如：<br /><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">I: Bus=0003 Vendor=1532 Product=0233 Version=0111</span><br><span class="line">N: Name=&quot;Razer Razer Blade Keyboard&quot;</span><br><span class="line">P: Phys=usb-0000:00:14.0-8/input1</span><br><span class="line">S: Sysfs=/devices/pci0000:00/0000:00:14.0/usb1/1-8/1-8:1.1/0003:1532:0233.0005/input/input11</span><br><span class="line">U: Uniq=</span><br><span class="line">H: Handlers=sysrq kbd event11</span><br><span class="line">B: PROP=0</span><br><span class="line">B: EV=10001f</span><br><span class="line">B: KEY=33eff 0 0 483ffff17aff32d bfd4444600000000 1 130c730b17c007 ffbf7bfad941dfff febeffdfffefffff fffffffff</span><br><span class="line">ffffffe</span><br><span class="line">B: REL=1040</span><br><span class="line">B: ABS=100000000</span><br><span class="line">B: MSC=10</span><br></pre></td></tr></table></figure>记住第一行<code>I: Bus=0003 Vendor=1532 Product=0233 Version=0111</code>后面需要的信息.<br /></li><li>找到要改的键的scancode<br />可以使用<code>evtest</code>工具查看scancode, 安装evtest:<br /><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S evtest</span><br></pre></td></tr></table></figure> 执行 <code>sudo evtest</code> 根据提示选择键盘设备,按下你要修改的按键, 得到的信息类似如下:<br /><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Event: time 1691079393.218622, type 4 (EV_MSC), code 4 (MSC_SCAN), value 700e0</span><br><span class="line">Event: time 1691079393.218622, type 1 (EV_KEY), code 29 (KEY_LEFTCTRL), value 1</span><br><span class="line">Event: time 1691079393.218622, -------------- SYN_REPORT ------------</span><br><span class="line">Event: time 1691079398.169693, type 4 (EV_MSC), code 4 (MSC_SCAN), value 70039</span><br><span class="line">Event: time 1691079398.169693, type 1 (EV_KEY), code 58 (KEY_CAPSLOCK), value 1</span><br><span class="line">Event: time 1691079398.169693, -------------- SYN_REPORT ------------</span><br></pre></td></tr></table></figure>可见KEY_LEFTCTRL的scancode是700e0，keycode是29；KEY_CAPSLOCK的scancode是70039，keycode是58</li><li>设置hwdb<br />创建或打开<code>/etc/udev/hwdb.d/90-custom-keyboard.hwdb</code>写入以下内容：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">evdev:input:b0003v1532p0233*</span><br><span class="line">  KEYBOARD_KEY_70039=leftctrl</span><br><span class="line">  KEYBOARD_KEY_700e0=capslock</span><br></pre></td></tr></table></figure> b(bus)v(vendor)p(product)要小写,这是我们在第一步得到的信息.然后执行<code>sudo systemd-hwdb update</code>，并重启.</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;笔记本键盘的键位一般都是通用键位,
一些习惯特殊配列或特殊键位的同学在使用笔记本键盘时都会很苦恼,
通常会需要修改键位. 如果笔记本驱动能够使用最好, 可是支持 Linux
下可用的驱动程序很少, 我们还可以通过修改系统对键盘的映射来调整键位.</summary>
    
    
    
    <category term="linux" scheme="https://esyruok.github.io/categories/linux/"/>
    
    
  </entry>
  
  <entry>
    <title>搭建Linux + Win11 双系统</title>
    <link href="https://esyruok.github.io/posts/a9f101ac/"/>
    <id>https://esyruok.github.io/posts/a9f101ac/</id>
    <published>2024-01-17T00:08:57.000Z</published>
    <updated>2024-07-17T14:15:55.098Z</updated>
    
    <content type="html"><![CDATA[<p>虽然当下 Linux 已经非常强大了, 但是仍然存在某些情况让你不得不使用Windows, 使用双系统就成为了大多数人的选择. 下面介绍以下如何安装一个Linux + Win11 的双系统环境. <span id="more"></span><br />我使用的是 ArchLinux + Win11 的组合. 先安装 Windows 再安装 Linux.</p><h2 id="安装-win11">安装 Win11</h2><p>具体步骤就不详细罗列了, 但是要注意以下两点:</p><ol type="1"><li>使用 Win11 进行分区时会自动创建一个 EFI 分区. (记住这个分区)<br /></li><li>在给 Win11 划分磁盘空间时不要全部划分出去, 给 Linux 预留出空间.</li></ol><h2 id="安装-linux">安装 Linux</h2><p>安装过程中要注意以下几点:</p><ol type="1"><li>磁盘分区时不需要再创建一个 EFI 分区, 使用 Windows 的 EFI分区即可.<br /></li><li>给磁盘格式化时注意不要格式化到 Windows 使用的分区.<br /></li><li>安装操作系统过程中, 直接将 Windows 的 EFI 分区挂载到 efi/即可.<br /></li><li>安装结束后 Linux 会将 Windows 的启动记录覆盖, 重启后进入 Linux重建.</li></ol><h2 id="重建-grub-启动项">重建 grub 启动项</h2><ol type="1"><li>安装 os-prober <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S os-prober</span><br></pre></td></tr></table></figure></li><li>修改 /etc/default/grub<br />取消 <strong>GRUB_DISABLE_OS_PROBER=false</strong> 的注释,没有就添加.<br /></li><li>更新 grub<br /><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure> 在输出信息中应该可以看到找到了 Windwos 的启动项.</li></ol><p>重启即可在 grub 启动目录上看到 Windows.</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;虽然当下 Linux 已经非常强大了, 但是仍然存在某些情况让你不得不使用
Windows, 使用双系统就成为了大多数人的选择. 下面介绍以下如何安装一个
Linux + Win11 的双系统环境.</summary>
    
    
    
    <category term="linux" scheme="https://esyruok.github.io/categories/linux/"/>
    
    
  </entry>
  
  <entry>
    <title>搭建ArchLinux桌面环境 -- 桌面美化</title>
    <link href="https://esyruok.github.io/posts/44a301f7/"/>
    <id>https://esyruok.github.io/posts/44a301f7/</id>
    <published>2024-01-13T09:31:46.000Z</published>
    <updated>2024-07-17T14:09:52.438Z</updated>
    
    <content type="html"><![CDATA[<p>介绍一下Gnome桌面美化. <span id="more"></span><br />美化一般就是壁纸 + 主题 + 插件. 壁纸就不提了设置中可以很容易的设置,主要介绍一下插件和主题.</p><h4 id="如何安装插件">如何安装插件</h4><ol type="1"><li>安装 gnome-browser-connector<br /><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo pacman -S gnome-browser-connector</span><br></pre></td></tr></table></figure></li><li>安装浏览器插件<br />使用 firefox 打开 Gnome 插件地址 extensions.gnome.org.<br />首次打开页面中会提示 <strong>Click here to install browserextension</strong> 点击安装插件.<br />浏览器会弹窗提示是否允许安装插件, 选择 <strong>Continue toInstallation</strong> 完成安装即可.<br />重启 firefox.<br /></li><li>安装 Gnome 插件<br />进入 extensions.gnome.org 搜索想要安装的插件, 进入插件详情页面点击<strong>OFF/NO</strong> 按钮即可控制插件开关,如果该插件未安装则会出现安装提示. (安装 Dash to dock 尝试一下)<br /></li><li>插件管理<br />可以使用插件网页, 也可以使用Gnome自带的应用程序Extensions.</li></ol><p>Gnome 桌面美化插件占了很大的一笔.现在可以浏览插件网址安装你想要的插件了.</p><h4 id="tweaks">Tweaks</h4><p>tweaks 是一个帮助我们管理 Gnome 桌面环境的软件, 它可以方便的管理主题,字体, 窗口样式等设置.<br /><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S gnome-tweaks --noconfirm</span><br></pre></td></tr></table></figure></p><h4 id="安装主题">安装主题</h4><ol type="1"><li>开启 user-themes 插件<br />这是一个系统插件, 打开 Extensions 程序可以看到所有已安装的插件,在里面点开即可.</li><li>下载主题并安装<br /><a href="www.gnome-look.org">Gnome-look</a>是一个很好的寻找主题的地方.下载主题压缩包后解压到 ** ~/.themes** 或者<strong>/usr/share/themes</strong> 中.<br />但是!! 强烈建议进入主题的 github页面使用作者提供的安装方式,方便省力.<br /></li><li>更改主题<br />使用 user-themes 或者 Tweaks 去选择主题.<br />GNOME 43 之后部分程序使用了 Libadwaita (比如 Files),这些程序目前不支持自定义主题, 如果想更改只能通过覆盖 gtk-4.0 的配置文件.这种方式非常不灵活但也是目前唯一的方法.这里没有深研究具体覆盖哪些文件，主题作者一般会在自己仓库的安装说明中介绍如何使用自身提供的安装脚本完成这一目的.</li></ol><h4 id="orchis">Orchis</h4><p>我使用的主题是 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3ZpbmNlbGl1aWNlL09yY2hpcy10aGVtZQ==">Orchis-theme<i class="fa fa-external-link-alt"></i></span>.<br />必要条件:</p><ul><li>gnome-themes-extra<br /></li><li>gtk-engine-murrine<br /></li><li>sassc</li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S gnome-themes-extra gtk-engine-murrine sassc</span><br></pre></td></tr></table></figure><blockquote><p>Note: 这个主题与插件 Blur my shell 有冲突, 不要开启此插件.</p></blockquote><p>安装主题:<br /><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/vinceliuice/Orchis-theme.git</span><br><span class="line"><span class="built_in">cd</span> Orchis-theme</span><br><span class="line">./install.sh -t purple </span><br><span class="line">./install.sh -l -c dark -t purple </span><br></pre></td></tr></table></figure></p><h4 id="推荐安装插件">推荐安装插件</h4><ul><li>Input Method Pannel<br />输入法需要使用这个插件来显示候选面板</li><li>Dash to dock<br />dock栏</li><li>Coverflow Alt-tab<br />窗口切换动画</li><li>Compiz alike magic lamp effect<br />窗口最小化动画效果</li><li>Compiz windows effect<br />窗口移动动画效果</li><li>AppIndicator and KStatusNotifierItem Support<br />程序托盘图标</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;介绍一下Gnome桌面美化.</summary>
    
    
    
    <category term="linux" scheme="https://esyruok.github.io/categories/linux/"/>
    
    
  </entry>
  
  <entry>
    <title>搭建ArchLinux桌面环境</title>
    <link href="https://esyruok.github.io/posts/debdcd0c/"/>
    <id>https://esyruok.github.io/posts/debdcd0c/</id>
    <published>2024-01-12T12:04:15.000Z</published>
    <updated>2024-07-17T14:05:12.219Z</updated>
    
    <content type="html"><![CDATA[<p>ArchLinux是一个以简洁, 高效, 用户完全控制为目标的Linux发行版,非常适合喜欢自定义系统的朋友. <span id="more"></span><br />本篇文章仅记录一个自己安装ArchLinux过程的CommandList以方便以后重装时参照. 详细的学习安装过程可参考ArchTurorial.</p><blockquote><p>特别感谢 <span class="exturl" data-url="aHR0cHM6Ly9hcmNobGludXhzdHVkaW8uZ2l0aHViLmlvL0FyY2hMaW51eFR1dG9yaWFsLyMv">ArchTurorial<i class="fa fa-external-link-alt"></i></span>的教程, 是一份非常详细的 ArchLinux 安装教程,对我在接触使用Arch的过程中提供了非常大的帮助.</p></blockquote><hr /><h2 id="基本系统安装">基本系统安装</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">systemctl stop reflector.service</span><br><span class="line"><span class="built_in">ls</span> /sys/firmware/efi/efivars <span class="comment"># 检查是否是UEFI启动</span></span><br><span class="line">iwctl <span class="comment"># 连接无线网</span></span><br><span class="line"><span class="comment"># device list</span></span><br><span class="line"><span class="comment"># station wlan0 scan</span></span><br><span class="line"><span class="comment"># station wlan0 get-networks </span></span><br><span class="line"><span class="comment"># station wlan0 connect YOUR-WIRELESS-NAME</span></span><br><span class="line"><span class="comment"># exit</span></span><br><span class="line">timedatectl set-ntp <span class="literal">true</span> <span class="comment"># 同步系统时间</span></span><br><span class="line">lsblk <span class="comment"># 查找硬盘名称.例如: sda</span></span><br><span class="line">parted /dev/sda <span class="comment"># 转换分区格式</span></span><br><span class="line"><span class="comment"># mktable</span></span><br><span class="line"><span class="comment"># gpt</span></span><br><span class="line"><span class="comment"># quit</span></span><br><span class="line">cfdisk /dev/sda <span class="comment"># 磁盘分区</span></span><br><span class="line"><span class="comment"># /efi 800M &quot;EFI system&quot;</span></span><br><span class="line"><span class="comment"># / 100G &quot;Linux filesystem&quot;</span></span><br><span class="line"><span class="comment"># /home 剩余全部 &quot;Linux filesystem&quot;</span></span><br><span class="line">fdisk -l <span class="comment"># 检查分区情况</span></span><br><span class="line">mkfs.vfat /dev/sda1 <span class="comment"># /efi</span></span><br><span class="line">mkfs.ext4 /dev/sda2 <span class="comment"># /</span></span><br><span class="line">mkfs.ext4 /dev/sda3 <span class="comment"># /home</span></span><br><span class="line">mount /dev/sda2 /mnt</span><br><span class="line"><span class="built_in">mkdir</span> /mnt/efi </span><br><span class="line">mount /dev/sda1 /mnt/efi</span><br><span class="line"><span class="built_in">mkdir</span> /mnt/home</span><br><span class="line">mount /dev/sda3 /mnt/home</span><br><span class="line">vim /etc/pacman.d/mirrorlist</span><br><span class="line"><span class="comment"># Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment"># Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line">pacstrap /mnt base base-devel linux linux-headers linux-firmware dhcpcd iwd bash-completion neovim git</span><br><span class="line">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</span><br><span class="line">arch-chroot /mnt </span><br><span class="line"><span class="built_in">ln</span> -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime <span class="comment"># 设置时区</span></span><br><span class="line">hwclock --systohc </span><br><span class="line">vim /etc/locale.gen <span class="comment"># 去掉en_US.UTF-8和zh_CN.UTF-8的注释</span></span><br><span class="line">locale-gen</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;LANG=en_US.UTF-8&#x27;</span> &gt; /etc/locale.conf <span class="comment"># 设置成英文</span></span><br><span class="line">vim /etc/hostname <span class="comment"># 设置主机名</span></span><br><span class="line">vim /etc/hosts</span><br><span class="line"><span class="comment"># 127.0.0.1   localhost  </span></span><br><span class="line"><span class="comment"># ::1         localhost  </span></span><br><span class="line"><span class="comment"># 127.0.1.1   you_hostname </span></span><br><span class="line">passwd root <span class="comment"># 设置root密码</span></span><br><span class="line">pacman -S intel-ucode <span class="comment"># Intel 微码</span></span><br><span class="line">pacman -S amd-ucode <span class="comment"># AMD 微码</span></span><br><span class="line">pacman -S grub efibootmgr <span class="comment"># 安装引导程序</span></span><br><span class="line">grub-install --target=x86_64-efi --efi-directory=/efi --bootloader-id=GRUB</span><br><span class="line">vim /etc/default/grub <span class="comment"># 修改内核参数 GRUB_CMDLINE_LINUX_DEFAULT=&quot;loglevel=5 nowatchdog&quot;</span></span><br><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br><span class="line"><span class="built_in">exit</span> <span class="comment"># 退出chroot的环境</span></span><br><span class="line">umount -R /mnt</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><h2 id="桌面环境">桌面环境</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">systemctl start dhcpcd <span class="comment"># 先联网</span></span><br><span class="line">systemctl start iwd</span><br><span class="line">iwctl</span><br><span class="line">vim /etc/pacman.conf <span class="comment"># 去除Color,ParallelDownloads,[multilib] 注释</span></span><br><span class="line">pacman -Syyu</span><br><span class="line">useradd -m -G wheel -s /bin/bash username <span class="comment"># 非root账户</span></span><br><span class="line">passwd username </span><br><span class="line">EDITOR=vim visudo <span class="comment"># 去掉 %wheel ALL=(ALL:ALL) ALL前的注释</span></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/swapfile bs=1M count=4096 status=progress <span class="comment">#创建4G的交换空间 大小根据需要自定</span></span><br><span class="line"><span class="built_in">chmod</span> 600 /swapfile</span><br><span class="line">mkswap /swapfile <span class="comment">#格式化swap文件</span></span><br><span class="line">swapon /swapfile <span class="comment">#启用swap文件</span></span><br><span class="line">nvim /etc/fstab <span class="comment"># 文件末尾添加行 /swapfile none swap defaults 0 0</span></span><br><span class="line">pacman -S gnome wayland <span class="comment"># Gnome桌面</span></span><br><span class="line">systemctl <span class="built_in">enable</span> gdm</span><br><span class="line">pacman -S networkmanager <span class="comment"># 网络管理工具</span></span><br><span class="line">systemctl <span class="built_in">disable</span> iwd</span><br><span class="line">systemctl stop iwd</span><br><span class="line">systemctl <span class="built_in">enable</span> NetworkManager</span><br><span class="line"><span class="comment"># Wayland设置</span></span><br><span class="line">sudo pacman -S qt5-wayland/qt6-wayland</span><br><span class="line">vim ~/.config/electron-flags.conf</span><br><span class="line"><span class="comment"># --enable-features=WaylandWindowDecorations</span></span><br><span class="line"><span class="comment"># --ozone-platform-hint=auto</span></span><br></pre></td></tr></table></figure><h2 id="常用软件">常用软件</h2><blockquote><p>Note: pacman用法:<br /><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S package_name     <span class="comment"># 安装软件包</span></span><br><span class="line">sudo pacman -Syyu               <span class="comment"># 升级系统 yy标记强制刷新 u标记升级动作</span></span><br><span class="line">sudo pacman -R package_name     <span class="comment"># 删除软件包</span></span><br><span class="line">sudo pacman -Rs package_name    <span class="comment"># 删除软件包，及其所有没有被其他已安装软件包使用的依赖包</span></span><br><span class="line">sudo pacman -Qdt                <span class="comment"># 找出孤立包 Q为查询本地软件包数据库 d标记依赖包 t标记不需要的包 dt合并标记孤立包</span></span><br><span class="line">sudo pacman -Rs $(pacman -Qtdq) <span class="comment"># 删除孤立软件包</span></span><br><span class="line">pacman -Ss package_name         <span class="comment"># 正则查询软件包</span></span><br></pre></td></tr></table></figure></p></blockquote><h3 id="基本软件">基本软件</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S git neovim</span><br><span class="line">git <span class="built_in">clone</span> https://aur.archlinux.org/yay.git &amp;&amp; <span class="built_in">cd</span> yay &amp;&amp; makepkg -si <span class="comment"># yay</span></span><br><span class="line">sudo pacman -S noto-fonts-cjk noto-fonts-emoji noto-fonts-extra <span class="comment"># 中文字体</span></span><br><span class="line">sudo pacman -S firefox</span><br><span class="line">sudo pacman -S ttf-jetbrains-mono-nerd <span class="comment"># nerd字体</span></span><br><span class="line">yay -S dialect <span class="comment"># 翻译软件</span></span><br><span class="line">yay -S clash-verge-rev-bin</span><br><span class="line">sudo pacman -S remmian freerdp <span class="comment"># 远程桌面工具</span></span><br><span class="line">sudo pacman -S code &amp;&amp; yay -S code-oss-marketplace <span class="comment"># vscode</span></span><br></pre></td></tr></table></figure><h3 id="显卡驱动">显卡驱动</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S mesa lib32-mesa vulkan-intel lib32-vulkan-intel <span class="comment"># intel驱动</span></span><br><span class="line">sudo pacman -S nvidia nvidia-utils nvidia-settings lib32-nvidia-utils <span class="comment"># nv驱动</span></span><br><span class="line">sudo pacman -S nvidia-prime <span class="comment"># 动态切换工具, 在使用独显的程序命令前加prime-run</span></span><br><span class="line">vim /etc/gdm/custom.conf <span class="comment"># 修改 WaylandEnable=true</span></span><br><span class="line">vim /etc/mkinitcpin.conf <span class="comment"># 编辑 MODULES=(nvidia nvidia_modeset nvidia_uvm nvidia_drm)</span></span><br><span class="line">sudo mkinitcpin -P</span><br><span class="line">vim /etc/default/grub <span class="comment"># 添加内核参数 nvidia_drm.modeset=1</span></span><br><span class="line">sudo <span class="built_in">ln</span> -s /dev/null /etc/udev/rules.d/61-gdm.rules <span class="comment"># 禁用GDM udev规则</span></span><br></pre></td></tr></table></figure><blockquote><p><code>nvidia-smi</code>命令可以查看nv显卡使用情况.</p></blockquote><h3 id="vmwaretools">VmwareTools</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S open-vm-tools gtkmm3</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> vmtoolsd vmware-vmblock-fuse</span><br></pre></td></tr></table></figure><h3 id="中文输入法">中文输入法</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S fcitx5 fcitx5-im fcitx5-chinese-addons</span><br><span class="line">yay -S fcitx5-input-support</span><br><span class="line">vim /etc/environment</span><br><span class="line"><span class="comment"># QT_IM_MODULE=fcitx</span></span><br><span class="line"><span class="comment"># XMODIFIERS=@im=fcitx</span></span><br><span class="line">fcitx5-configuration <span class="comment"># 打开配置工具配置</span></span><br></pre></td></tr></table></figure><blockquote><p>Gnome需要安装<code>Input Method Pannel</code>插件支持候选面板显示.</p></blockquote><h3 id="openvpn-client">Openvpn Client</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S openvpn</span><br><span class="line"><span class="comment"># 为支持旧版本加密算法,需要在.ovpn配置文件中增加配置</span></span><br><span class="line"><span class="comment"># data-ciphers BF-CBC</span></span><br><span class="line"><span class="comment"># data-ciphers-fallback BF-CBC</span></span><br><span class="line"><span class="comment"># providers legacy default</span></span><br><span class="line">sudo openvpn --config xxxx.ovpn</span><br></pre></td></tr></table></figure><h3 id="zsh">Zsh</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S zsh zsh-completions</span><br><span class="line">chsh -l <span class="comment"># 查看所有shell</span></span><br><span class="line">chsh -s /usr/bin/zsh <span class="comment"># 改变默认shell</span></span><br><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br><span class="line">vim ~/.zshrc <span class="comment"># plugins = (git z sudo web-search)</span></span><br><span class="line">yay -S zsh-theme-powerlevel10k-git</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;source /usr/share/zsh-theme-powerlevel10k/powerlevel10k.zsh-theme&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class="line"><span class="built_in">exec</span> zsh <span class="comment"># 重启zsh执行向导 或 p10k configure</span></span><br></pre></td></tr></table></figure><h3 id="sunlogin">Sunlogin</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yay -S sunloginclient</span><br><span class="line">sudo systemctl start runsunloginclient.service <span class="comment"># 使用前先启动服务</span></span><br></pre></td></tr></table></figure><h3 id="waydroid">Waydroid</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yay -S binder_linux_dkms</span><br><span class="line">sudo modprobe binder_linux</span><br><span class="line">su</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;binder_linux&quot;</span> &gt;&gt; /etc/modules-load.d/binder.conf</span><br><span class="line">yay -S waydroid</span><br><span class="line">sudo waydroid init</span><br><span class="line">sudo systemctl start waydroid-container</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> waydroid-container</span><br><span class="line">waydroid session start <span class="comment"># 手动执行一下waydroid</span></span><br><span class="line">waydroid app install xxx.apk <span class="comment"># 安装apk</span></span><br><span class="line">waydroid prop <span class="built_in">set</span> persist.waydroid.multi_windows <span class="literal">true</span> <span class="comment"># 设置多窗口</span></span><br><span class="line"><span class="comment"># 卸载方法</span></span><br><span class="line">waydroid session stop</span><br><span class="line">sudo systemctl stop waydroid-container</span><br><span class="line">yay -Rsn waydroid</span><br><span class="line">sudo <span class="built_in">rm</span> -rf /var/lib/waydroid ~/.local/share/application/*aydroid* ~/.local/share/waydroid</span><br></pre></td></tr></table></figure><h2 id="常见问题记录">常见问题记录</h2><h3 id="f区按键映射">F区按键映射</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> 0 | sudo <span class="built_in">tee</span> /sys/module/hid_apple/parameters/fnmode</span><br><span class="line"><span class="comment"># 如果恢复正常写入配置</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;options hid_apple fnmode=0&quot;</span> | sudo <span class="built_in">tee</span> -a /etc/modprobe.d/hid_apple.conf</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;ArchLinux是一个以简洁, 高效, 用户完全控制为目标的Linux发行版,
非常适合喜欢自定义系统的朋友.</summary>
    
    
    
    <category term="linux" scheme="https://esyruok.github.io/categories/linux/"/>
    
    
  </entry>
  
  <entry>
    <title>GitHub Pages + Hexo + NexT 搭建博客(配置篇)</title>
    <link href="https://esyruok.github.io/posts/e3e38b21/"/>
    <id>https://esyruok.github.io/posts/e3e38b21/</id>
    <published>2024-01-06T17:26:48.000Z</published>
    <updated>2024-06-10T03:13:13.320Z</updated>
    
    <content type="html"><![CDATA[<p>在上一篇博客中只记录了搭建过程, 这篇文章会记录一下对 Hexo 与 NexT的配置. <span id="more"></span></p><blockquote><p>原本是想通过这篇文章一边学习一边写下每一项配置的意义和配置方法,不知不觉写了巨长的篇幅, 有些过于冗长, 自己看都看不下去.文章的本意是帮助快速的完成一个基本的配置, 所以文章会精简一些,只记录我认为比较常用且重要的配置,日后再折腾的时候不用再去一层一层的查找文档.<br />想细致学习的同学不用着急, 在配置文件中官方原本就附带了注释内容,比较清晰且附带了官方文档的链接地址.完整读一遍配置文件就可了解到所有的配置内容.</p></blockquote><h2 id="hexo-配置-_config.yml">Hexo 配置 (_config.yml)</h2><h3 id="site">Site</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">title</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">subtitle</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">description</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">keywords</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">author</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br></pre></td></tr></table></figure><p>配置项的 key 名称即内容简单易懂. <strong>title, subtitle,description, author</strong> 这四项是可以显示在界面上的,填上看看效果然后根据自己的意愿修改内容即可. 如果你想使用多语言,<strong>language</strong> 将你想使用的语言都写上.</p><h3 id="url">URL</h3><h5 id="永久链接">永久链接</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">url:</span> <span class="string">https://username.github.io/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">posts/:abbrlink/</span> <span class="comment"># 我这里使用了 hexo-abbrlink 插件</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br></pre></td></tr></table></figure><p>permalinks 是指文章路径的形式, 例如:<br /><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 一篇文章在 source/_post/hello-world.md</span></span><br><span class="line"><span class="string">permalinks:year/:month/:day/:title/</span></span><br><span class="line"><span class="comment"># 生成静态文件后文章的路径为 2013/07/14/hello-world/</span></span><br></pre></td></tr></table></figure> 可使用的变量查看 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlvL3poLWNuL2RvY3MvcGVybWFsaW5rcw==">Permalinks<i class="fa fa-external-link-alt"></i></span>.<br />我所使用的 <strong>hexo-abbrlink</strong> 变量是插件提供的,使用文章的时间与文件名计算 hash 值来作为变量值.<strong>pretty_urls</strong> 中的两选项要你配置了 permalinks 中使用了index.html 才有意义. 修改看不出效果的不要疑惑哈.<br /><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># permalink: posts/:abbrlink/index.html 这样链接中才会有 index.html 让你来美化</span></span><br><span class="line"><span class="attr">pretty_urls:</span></span><br><span class="line">    <span class="attr">trailing_index:</span> <span class="literal">true</span> </span><br><span class="line">    <span class="attr">trailing_html:</span> <span class="literal">true</span> </span><br></pre></td></tr></table></figure></p><h5 id="hexo-abbrlink">hexo-abbrlink</h5><p>安装插件模块:<br /><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure> 添加配置:<br /><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line"> <span class="attr">alg:</span> <span class="string">crc32</span>      <span class="comment">#support crc16(default) and crc32</span></span><br><span class="line"> <span class="attr">rep:</span> <span class="string">hex</span>        <span class="comment">#support dec(default) and hex</span></span><br></pre></td></tr></table></figure></p><h3 id="文章配置">文章配置</h3><h5 id="默认布局">默认布局</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span></span><br></pre></td></tr></table></figure><p>这影响你使用 <code>hexo new title</code> 时使用的默认布局.</p><h5 id="文章资源文件夹">文章资源文件夹</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span> </span><br></pre></td></tr></table></figure><p>开启文章资源文件夹, 开启 post_asset_folder 后, 在你进行 hexo new创建文章时会自动帮你创建文章资源文件夹.</p><blockquote><p>hexo 中资源文件夹有两种形式, 全局资源文件夹和文章资源文件夹.<br />- 全局资源文件夹<br />比如说你需要一个存放图片资源的地方那么可以建立一个目录存放<code>source/images</code>, 在文章中通过<code>![](/images/image.jpg)</code> 引用,所有文章都可以以这个路径引用.<br />- 文章资源文件夹<br />如果博客中的图片非常多全放在一个目录中就非常乱了.文章资源文件夹就是创建一个与你文章同名的目录, 比如<code>source/hello-world</code>, 在文章中通过相对路径<code>![](image.jpg)</code> 引用.只有这个这个文章可以使用这个相对路径.</p></blockquote><h5 id="代码高亮引擎">代码高亮引擎</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">syntax_highlighter: highlight.js </span><br></pre></td></tr></table></figure><p>自带两种高亮引擎, 选自你使用的写上名称即可.</p><h5 id="分页目录">分页目录</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">pagination_dir:</span> <span class="string">pages</span></span><br><span class="line"><span class="comment"># 翻页后的URL : http://example.com/pages/2</span></span><br></pre></td></tr></table></figure><p><strong>pagination_dir</strong> 是当你的文章列表翻页后 URL的形式.</p><h5 id="类别与标签">类别与标签</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">default_category:</span> <span class="string">uncategorized</span></span><br></pre></td></tr></table></figure><p>默认分类, 当你没有给文章分类信息时, 那么它就属于这个默认分类.<br /><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">category_map:</span> </span><br><span class="line">  <span class="attr">tech:</span> <span class="string">Technology</span></span><br><span class="line">  <span class="attr">jishu:</span> <span class="string">Technology</span></span><br><span class="line"><span class="attr">tag_map:</span></span><br></pre></td></tr></table></figure> 分类和标签别名,可以将多个分类/标签映射成一个分类/标签.</p><h2 id="next-配置-_config.next.yml">NexT 配置 (_config.next.yml)</h2><h3 id="主题">主题</h3><h5 id="布局">布局</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">scheme:</span> <span class="string">Gemini</span></span><br></pre></td></tr></table></figure><p>NexT 提供了四种布局样式,官方提仓库提供了一些例子可以对每种样式进行一个大概的预览再选择. <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL25leHQtdGhlbWUvYXdlc29tZS1uZXh0I2xpdmUtcHJldmlldw==">awesome-next<i class="fa fa-external-link-alt"></i></span>.</p><h5 id="深色模式">深色模式</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">darkmode:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>深色模式, 开启就可以跟据浏览器的亮暗模式自动进行切换.</p><h5 id="图标">图标</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">favicon:</span></span><br><span class="line">  <span class="attr">small:</span> <span class="string">/images/favicon-16x16-next.png</span></span><br></pre></td></tr></table></figure><p>这个是标签页上的那个小图标. 可以将自定义图标放在 source/images目录当中并且修改配置上文件名.</p><h5 id="主题颜色">主题颜色</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">theme_color:</span> </span><br><span class="line">  <span class="attr">light:</span> <span class="string">&quot;#222&quot;</span></span><br><span class="line">  <span class="attr">dark:</span> <span class="string">&quot;#222&quot;</span></span><br></pre></td></tr></table></figure><p>主题颜色, 就是 title 后面很小一部分.</p><h5 id="代码块高亮主题">代码块高亮主题</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="comment"># Code Highlight theme</span></span><br><span class="line">  <span class="comment"># All available themes: https://theme-next.js.org/highlight/</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">base16/silk-light</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">vs2015</span></span><br></pre></td></tr></table></figure><p>代码高亮主题, 可以通过给的网址去预览各种主题, 将选好的名称添上.</p><h5 id="背景丝带">背景丝带</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">canvas_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">size:</span> <span class="number">300</span> <span class="comment"># The width of the ribbon</span></span><br><span class="line">  <span class="attr">alpha:</span> <span class="number">0.6</span> <span class="comment"># The transparency of the ribbon</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># The display level of the ribbon</span></span><br></pre></td></tr></table></figure><p>在背景画布上装饰一个可变化的丝带.</p><h3 id="菜单">菜单</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br></pre></td></tr></table></figure><p>默认支持的菜单只有 home 和 archives. 不过 NexT支持我们自定义创建菜单项目.</p><blockquote><ul><li>创建自定义页面<br /></li></ul><ol type="1"><li>使用 hexo new page custom-name 创建一个自定义的页面<br /></li><li>修改新建页面的 index.md 添加 Front-matter 信息与内容<br /></li><li>编辑 menu 配置. (例如:<code>custom: /custom-name/ || fa fa-custom</code>)<br /></li></ol><ul><li>创建 tags 页面<br />一种特殊的自定义页面, tags 页面只需在 index.md 的 Front-matter 信息中将type 设置为 tags, 就可以将所有文章的 tag 显示在页面中.<br /></li><li>创建 categories 页面<br />与 tags 相同, 只是 type = categories.</li></ul></blockquote><p>NexT 还支持动态子菜单, 例如:<br /><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="attr">Docs:</span></span><br><span class="line">    <span class="attr">default:</span> <span class="string">/docs/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-book</span></span><br><span class="line">    <span class="attr">Getting Started:</span></span><br><span class="line">      <span class="attr">default:</span> <span class="string">/getting-started/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-flag</span></span><br><span class="line">      <span class="attr">Installation:</span> <span class="string">/installation.html</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-download</span></span><br><span class="line">      <span class="attr">Configuration:</span> <span class="string">/configuration.html</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-wrench</span></span><br></pre></td></tr></table></figure> 上面的配置方式会在拥有子菜单的页面 (例如 docs )上方产生相应的子菜单.</p><h3 id="侧边栏">侧边栏</h3><h5 id="头像">头像</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/avatar.gif</span></span><br><span class="line">  <span class="attr">rounded:</span> <span class="literal">true</span> </span><br><span class="line">  <span class="attr">rotated:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>头像, 更改方式和 favicon 相同.</p><h5 id="站点状态">站点状态</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">site_state:</span> <span class="literal">true</span> </span><br></pre></td></tr></table></figure><p>将文章,标签, 类别数量显示在侧边栏当中.</p><h5 id="社交链接">社交链接</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="comment">#GitHub: https://github.com/yourname || fab fa-github</span></span><br><span class="line">  <span class="comment">#E-Mail: mailto:yourname@gmail.com || fa fa-envelope</span></span><br></pre></td></tr></table></figure><p>侧边栏中添加一些社交账号的图标, 点击可以快速导航.</p><h5 id="友情链接">友情链接</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="attr">Title:</span> <span class="string">https://example.com</span> <span class="comment"># 友情链接的title和链接, 如果没有则不会显示友情链接块</span></span><br></pre></td></tr></table></figure><p>友情链接, 出现在侧边栏下方.</p><h5 id="公共版权许可">公共版权许可</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="attr">size:</span> <span class="string">small</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">language:</span></span><br></pre></td></tr></table></figure><p>版权许可信息, sidebar 设置让你在侧边栏中有个图标, post设置让你的许可信息出现在每篇文章的末尾.</p><h3 id="页脚">页脚</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="string">...</span></span><br></pre></td></tr></table></figure><p>页面最底部显示的一系列信息.</p><h3 id="文章">文章</h3><h5 id="目录">目录</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>文章目录, 浏览文章时, 会自动根据 Markdown格式在侧边栏相同的位置产生一个目录</p><h5 id="摘要">摘要</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">excerpt_description:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>控制文章摘要的方式, 如果使用 true 则要在文章中使用 description变量来储存摘要, false 则在文章内容中添加 <code>&lt;!--more--&gt;</code>来表示标签之前的内容为摘要. 建议使用 false.</p><h5 id="阅读全文">阅读全文</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">read_more_btn:</span> <span class="literal">true</span> </span><br></pre></td></tr></table></figure><p>文章列表中显示"阅读全文"按钮.</p><h5 id="文章属性显示">文章属性显示</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_meta:</span></span><br></pre></td></tr></table></figure><p>这部分是选择展示出来的文件属性. 可以在文章列表中看到,也可以在文章详情看到, 都是在标题下方.<br /><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">symbols_count_time:</span> <span class="comment"># 字数统计,阅读时间</span></span><br><span class="line">  <span class="attr">separated_meta:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">item_text_total:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure> 字数统计与大概阅读时间. 显示位置与 post_meta 相同.需要额外安装插件模块:<br /><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npm install hexo-word-counter</span><br><span class="line">hexo clean</span><br></pre></td></tr></table></figure> <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">tag_icon:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure> tag 会显示在文章底部, true 表示在 tag前使用图标, false 是使用一个 #</p><h5 id="打赏按钮">打赏按钮</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">reward_settings:</span></span><br><span class="line"><span class="attr">reward:</span></span><br></pre></td></tr></table></figure><p>文章末尾添加一个打赏按钮.</p><h5 id="follow-me">Follow Me</h5><p>文章内版本的 social. <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">follow_me:</span></span><br><span class="line">  <span class="comment">#Twitter: https://twitter.com/username || fab fa-twitter</span></span><br></pre></td></tr></table></figure> 这个也是显示在文章末尾.</p><h5 id="返回顶部按钮">返回顶部按钮</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">back2top:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>左下角一个返回顶部按钮.</p><h5 id="阅读进入条">阅读进入条</h5><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">reading_progress:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>阅读文章时, 顶部有一个带颜色的阅读进度条.</p><h3 id="插件">插件</h3><h5 id="数学公式渲染">数学公式渲染</h5><p>math 配置提供渲染 Markdown 中数学公式的能力.<br /><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">math:</span></span><br><span class="line">  <span class="attr">every_page:</span> <span class="literal">false</span> <span class="comment"># `mathjax: true`</span></span><br><span class="line">  <span class="attr">mathjax:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Available values: none | ams | all</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">none</span></span><br></pre></td></tr></table></figure> every_page 代表是否要每个页面都加载渲染引擎, 如果设置成false 需要在想要进行公式渲染页面的 Front-matter 中手动添加 mathjax: true开启渲染.<br />使用 mathjax 需要卸载 Hexo 原有的渲染器改用 hexo-renderer-pandoc.<br /><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># sudo pacman -S pandoc # 渲染器依赖 pandoc</span></span><br><span class="line"><span class="comment"># npm un hexo-renderer-marked</span></span><br><span class="line"><span class="comment"># npm i hexo-renderer-pandoc --save</span></span><br><span class="line"><span class="comment"># hexo clean &amp;&amp; hexo s</span></span><br></pre></td></tr></table></figure></p><h5 id="loacal-search">Loacal Search</h5><p>搜索功能, 它会出现在菜单上.<br /><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb</span><br></pre></td></tr></table></figure> Hexo 配置.<br /><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br></pre></td></tr></table></figure> NexT 配置.<br /><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></p><h5 id="rss">RSS</h5><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><p>配置文件, 配置在 Hexo 或 NexT 哪个配置里都行.<br /><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> </span><br><span class="line">  <span class="attr">type:</span> <span class="string">atom</span> </span><br><span class="line">  <span class="attr">path:</span> <span class="string">atom.xml</span> </span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span> </span><br><span class="line">  <span class="attr">content_limit:</span> <span class="number">140</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span> </span><br></pre></td></tr></table></figure> 页面链接可以添加在 menu , follow 或 social 中都可以.<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">RSS:</span> <span class="string">/atom.xml</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-rss</span></span><br></pre></td></tr></table></figure></p><p>Ok, 一个包括所有基本 DIY 配置的博客就搭建完成了.当然还有很多关于性能, SEO, CDN 等配置感兴趣的同学继续加油!</p><h2 id="终极美化大法">终极美化大法</h2><p>对于想要尽情挥洒创意的同学, 配置文件中有一项非常重要的部分custom_file_path. 它可以让你自己通过 css 去设定样式.</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="comment">#head: source/_data/head.njk</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></span><br></pre></td></tr></table></figure><p>取消注释并创建对应的文件后, 浏览器按下 F12 对照布局尽情创作吧.作者不是太懂这方面都是网上翻着例子文档照葫芦画瓢就不班门弄斧了.<br />最后推荐几个素材网站. (吐槽一下:某些网站真是无语不是要注册就是要会员)<br /><span class="exturl" data-url="aHR0cHM6Ly9pY29uczguY29tL2ljb25z">icons<i class="fa fa-external-link-alt"></i></span> | <span class="exturl" data-url="aHR0cHM6Ly93d3cucG5nZWdnLmNvbS8=">pngegg<i class="fa fa-external-link-alt"></i></span><br />还有个颜色代码工具, 相信你们会用到的 :)<br /><span class="exturl" data-url="aHR0cHM6Ly9odG1sY29sb3Jjb2Rlcy5jb20vemgv">HTML颜色代码<i class="fa fa-external-link-alt"></i></span></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;在上一篇博客中只记录了搭建过程, 这篇文章会记录一下对 Hexo 与 NexT
的配置.</summary>
    
    
    
    <category term="hexo" scheme="https://esyruok.github.io/categories/hexo/"/>
    
    
  </entry>
  
  <entry>
    <title>GitHub Pages + Hexo + NexT 博客搭建 (搭建篇)</title>
    <link href="https://esyruok.github.io/posts/6b2ed3a/"/>
    <id>https://esyruok.github.io/posts/6b2ed3a/</id>
    <published>2023-12-31T16:12:25.000Z</published>
    <updated>2024-06-10T03:13:13.320Z</updated>
    
    <content type="html"><![CDATA[<p>记录一下小白使用 GitHub Pages + Hexo + NexT 搭建博客的方法与使用方式,作为笔记方便不熟悉时进行查阅. 由于作者不懂前端, 所以DIY 程度有限,仅限于一些基本的配置, 本博客就是搭建的成果可以作为参考. <span id="more"></span>使用的环境是 ArchLinux, 其他版本的系统除了基本工具安装外步骤应该相同,也可以进一步查阅官方文档.<br /><span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlvL3poLWNuL2RvY3Mv">Hexo文档<i class="fa fa-external-link-alt"></i></span> | <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9kb2NzLw==">NexT文档<i class="fa fa-external-link-alt"></i></span></p><h2 id="站点搭建">站点搭建</h2><ol type="1"><li><p>安装Git/Nodejs/npm.<br /><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S git nodejs npm </span><br></pre></td></tr></table></figure></p></li><li><p>安装 Hexo.<br /><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p></li><li><p>创建 Hexo 站点.<br /><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo init hexo-site</span><br><span class="line"><span class="built_in">cd</span> hexo-site</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure> <strong>hexo-site</strong> 目录中会出现一个<strong>_config.yml</strong> 文件, 后面提到的 <strong>Hexo配置文件</strong> 就是指这个文件.<br /></p></li><li><p>生成静态文件 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure></p><blockquote><p>简写 hexo g</p></blockquote></li><li><p>启动本地服务器 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo server </span><br></pre></td></tr></table></figure></p><blockquote><p>简写 hexo s</p></blockquote><p>控制台会显示一个本地的 http 地址来让你预览站点.</p><blockquote><p>Options:<br />--safe 安全模式, 不加载插件<br />--debug 在终端中显示调试信息<br />--silent 简介模式, 隐藏终端信息<br />--draft 显示草稿</p></blockquote></li></ol><p>Ok! 一个毛坯站点就这样完成了.</p><h2 id="文章管理">文章管理</h2><ol type="1"><li><p>新建文章 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo new <span class="string">&quot;title&quot;</span></span><br></pre></td></tr></table></figure> <strong>new</strong> 命令格式为<strong>hexo new [layout] &lt;title&gt;</strong>,<strong>layout</strong> 为可选参数, hexo 默认有三种方案 <strong>post /draft / page</strong>.</p><blockquote><ul><li>post<br />代表你要创建一个要发布的文章, 命令直接在 <strong>source/_post/</strong>下建立一个 <strong>&lt;title&gt;.md</strong> 文件.<br /></li><li>draft<br />代表你要创建一个草稿, 命令在 <strong>source/_draft/</strong> 下建立一个<strong>&lt;title&gt;.md</strong> 文件.</li><li>page<br />方案代表要创建一个页面,命令在 <strong>source/</strong> 下创建一个<strong>&lt;title&gt;</strong> 目录, 并在目录中产生一个<strong>index.md</strong> 文件.</li></ul></blockquote><p>如果不使用 layout 参数, 则默认使用在 **_config.yml** 配置文件中<strong>default_layout</strong> 项所设置的方案, 初始状态为<strong>post</strong>.<br /><strong>&lt;title&gt;</strong> 如果包含空格需要用引号括起来<strong>"Hello World"</strong>.<br />接下来就可以在新建的文件中使用 Markdown 来书写文章内容了.如果想删除文章直接删除对应的文件即可.<br /></p></li><li><p>发表草稿 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo publish &lt;filename&gt;</span><br></pre></td></tr></table></figure> <strong>publish</strong>操作是将你的文章从 <strong>_draft</strong> 文件夹移动到<strong>_post</strong> 文件夹.<br /></p></li><li><p>Front-matter<br />使用 <strong>Hexo new</strong> 创建的文章会根据模板携带<strong>Front-matter</strong>. 指的是文件最上方以 <strong>---</strong>分隔的区域, 用于指定当前文件的一些变量.<br /><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">title: Hello World</span><br><span class="line">data: 2013/9/13 12:45:11</span><br></pre></td></tr></table></figure> 它们会对应一些 Hexo 功能的使用, 比如创建页面时需要使用<strong>updated</strong> 来展示更新时间, <strong>tag</strong> 和<strong>categories</strong>为文章添加标签和分类属性以便参与标签分类的统计与分类展示.<br /></p></li><li><p>修改 Hexo 配置文件<br />修改 **_config.yml** 文件选择使用的主题.<br /><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">theme:next</span></span><br></pre></td></tr></table></figure></p></li><li><p>主题配置文件<br />官方文档建议使用 <strong>Alternate Theme Config</strong> 进行配置,大概意思就是除了主题模块中所携带的配置文件外,还可以在另一个约定好的位置有另一份配置文件,这样可以避免主题升级时将配置文件覆盖. 要求这个文件与 Hexo配置文件在同一级目录, 并且文件名必须是 **_config.next.yml**.我们可以使用下列命令来生成配置文件.<br /><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># pwd : hexo-site/</span></span><br><span class="line"><span class="built_in">cp</span> node_modules/hexo-theme-next/_config.yml _config.next.yml</span><br></pre></td></tr></table></figure></p></li><li><p>升级NexT主题 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> hexo-site</span><br><span class="line">npm install hexo-theme-next@latest</span><br></pre></td></tr></table></figure></p></li></ol><h2 id="站点部署">站点部署</h2><p>这里我们除了使用 GitHub Pages 作为部署工具外, 还将使用 Github作为多端同步的手段. 多端同步的思路大致是, 使用 GitHub 的 master分支来存放源代码, 使用 page 分支来作为 Pages 的部署分支. 用 master分支编写文章, page 分支部署站点.</p><ol type="1"><li>创建 GitHub 仓库<br />仓库名必须是 <strong><username>.github.io</strong> 其中 username 是指GitHub 的用户名. 仓库必须是 Public 或者您是 Github Pro.<br /></li><li>提交源代码到 master<br /><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> hexo-site</span><br><span class="line">git init</span><br><span class="line">git branch -M master</span><br><span class="line">git add .gitginore</span><br><span class="line">git commit -m <span class="string">&quot;init site source&quot;</span></span><br><span class="line">git remote add origin git@github.com:Username/Username.github.io.git</span><br><span class="line">git checkout -b page </span><br><span class="line"><span class="built_in">rm</span> .gitginore</span><br><span class="line">git commit -m <span class="string">&quot;clean page repo&quot;</span></span><br><span class="line">git push origin master</span><br><span class="line">git push origin page</span><br></pre></td></tr></table></figure> 稍微有一点繁琐, 因为我们需要两个分支, 而 Git不能推送一个空的仓库上去, 也不能创建空的分支, 所以我利用 .gitginore创造一条记录, 创建完 page分支后又将该文件删除来创造两个需要的分支.<br />page 分支创造好后就可以将 <strong>hexo-site</strong> 下的内容提交到master 分支上了.<br /></li><li>安装部署工具 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> hexo-site</span><br><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></li><li>配置部署参数 打开 Hexo 配置文件寻找 <strong>deploy</strong>部分.格式如下:<br /><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/username/username.github.io</span> </span><br><span class="line">  <span class="attr">branch:</span> <span class="string">page</span></span><br><span class="line">  <span class="attr">message:</span> [<span class="string">message</span>]</span><br></pre></td></tr></table></figure> 如果你想使用 ssh 来连接, <strong>repo</strong> 使用 ssh连接即可.<br /><strong>message</strong> 是自定义提交信息, 如果不设置有默认格式.<br /></li><li>部署至远程库 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo deploy</span><br></pre></td></tr></table></figure> 这个动作会产生一个<strong>.deploy_git</strong> 目录, 并可能提示你去配置一些 git 设置,最终会将站点的静态文件推送到指定的分支当中.<br /></li><li>设置 Pages<br />登入 Github 进入仓库 -&gt; Setting -&gt; Pages.<br />Build and deployment 下的 Source 选择 Deploy from a branch, Branch下选择使用的分支 <code>page</code>.</li></ol><p>大功告成了.</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;记录一下小白使用 GitHub Pages + Hexo + NexT 搭建博客的方法与使用方式,
作为笔记方便不熟悉时进行查阅. 由于作者不懂前端, 所以DIY 程度有限,
仅限于一些基本的配置, 本博客就是搭建的成果可以作为参考.</summary>
    
    
    
    <category term="hexo" scheme="https://esyruok.github.io/categories/hexo/"/>
    
    
  </entry>
  
</feed>
